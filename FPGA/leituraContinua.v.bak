module leituraContinua(clk, rst, doneCtrl,En, Dados, done, contEn);
	input clk, rst, En, doneCtrl;
	output [7:0] Dados;
	output reg done, contEn;
	
	reg done = 1'b0;
	reg contEn = 1'b0;
	parameter Idle = 1'b0, loop = 1'b1;
	reg state, next;
	reg[7:0] buffer;
	reg [5:0] contador_universal = 0;
	reg clk1_mhz;
	always @(posedge clk, negedge rst) begin
		if(!rst) state <= idle;
		else state <= next;
	end
	reg [1:0] countTime = 2'b00
	always @(posedge clk) begin 
		if (contador_universal < 50) begin
			contador_universal = contador_universal+1;
			clk1_mhz = 0;
		end
		else begin
			contador_universal = 0;
			clk1_mhz = 1;
		end
	end
	
	always @(En, doneCtrl) begin
		case(state) begin
			idle: begin
				if(En & doneCtrl) begin
					doneCtrl <= 1'b0;
					next <= loop;
				end
				else begin
					next <= idle;
				end
			loop: begin
				if(!doneCtrl) begin
					if(countTime == 2'b11) begin
						countTime <= countTime + 1'b1;
					end
					else begin
						doneCtrl <= 1'b1;
						buffer <= Dados;
						done <= 1'b1;
						contEn <= En;
						countTime <= 2'b00
					end
				end
				
				else begin
					next <= idle;
				end
			end
			end
		end
	end




endmodule